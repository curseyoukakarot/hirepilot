.caret-blink { display:inline-block; animation: caret 1s steps(1) infinite; font-size: .8em; line-height: 1; transform: translateY(1px); }
@keyframes caret { 50% { opacity: 0; } }

/* Typewriter + cursor */
.typewriter { overflow: hidden; white-space: nowrap; animation: typing 3.5s steps(40, end); }
@keyframes typing { from { width: 0 } to { width: 100% } }
.cursor-blink { animation: blink 1s infinite; }
@keyframes blink { 0%,50% { opacity: 1 } 51%,100% { opacity: 0 } }

/* Terminal glow */
.terminal-glow { box-shadow: 0 0 20px rgba(34,197,94,0.3), 0 0 40px rgba(34,197,94,0.1); }

/* Message entrance */
.message-fade-in { animation: fadeInUp 0.5s ease-out; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px) } to { opacity: 1; transform: translateY(0) } }

/* Dot pulse */
.dot-pulse { animation: dotPulse 1.5s infinite; }
@keyframes dotPulse { 0%,20% { opacity: 0 } 50% { opacity: 1 } 80%,100% { opacity: 0 } }

/* Hide scrollbars */
::-webkit-scrollbar { display: none }
html, body { -ms-overflow-style: none; scrollbar-width: none }

/* -------------------------------------------------------------------------- */
/* REX theme parity: exact dark palette + light-mode counterpart              */
/* -------------------------------------------------------------------------- */

/* Ensure the REX shell follows the intended dark palette by default. */
#rex-container {
  background-color: #010409;
  color: #f3f4f6;
}

/* Light mode overrides are scoped to REX only so they don't affect other pages. */
html:not(.dark) #rex-container {
  background-color: #f8f9fa;
  color: #212529;
}

html:not(.dark) #rex-container .bg-dark-950 { background-color: #f8f9fa !important; }
html:not(.dark) #rex-container .bg-dark-900 { background-color: #ffffff !important; }
html:not(.dark) #rex-container .bg-dark-800 { background-color: #f8f9fa !important; }
html:not(.dark) #rex-container .bg-dark-700 { background-color: #e9ecef !important; }
html:not(.dark) #rex-container .bg-dark-600 { background-color: #dee2e6 !important; }
html:not(.dark) #rex-container .bg-dark-800\/50 { background-color: rgba(248, 249, 250, 0.75) !important; }
html:not(.dark) #rex-container .bg-dark-800\/30 { background-color: rgba(233, 236, 239, 0.55) !important; }
html:not(.dark) #rex-container .bg-dark-900\/50 { background-color: rgba(255, 255, 255, 0.7) !important; }

html:not(.dark) #rex-container .border-dark-900 { border-color: #dee2e6 !important; }
html:not(.dark) #rex-container .border-dark-800 { border-color: #dee2e6 !important; }
html:not(.dark) #rex-container .border-dark-700 { border-color: #ced4da !important; }
html:not(.dark) #rex-container .border-dark-600 { border-color: #adb5bd !important; }

html:not(.dark) #rex-container .text-gray-100 { color: #212529 !important; }
html:not(.dark) #rex-container .text-gray-200 { color: #343a40 !important; }
html:not(.dark) #rex-container .text-gray-300 { color: #495057 !important; }
html:not(.dark) #rex-container .text-gray-400 { color: #6c757d !important; }
html:not(.dark) #rex-container .text-gray-500 { color: #6c757d !important; }

html:not(.dark) #rex-container .hover\:bg-dark-900:hover { background-color: #f8f9fa !important; }
html:not(.dark) #rex-container .hover\:bg-dark-800:hover { background-color: #e9ecef !important; }
html:not(.dark) #rex-container .hover\:bg-dark-700:hover { background-color: #dee2e6 !important; }
html:not(.dark) #rex-container .hover\:bg-dark-600:hover { background-color: #ced4da !important; }
html:not(.dark) #rex-container .hover\:text-white:hover { color: #0d1117 !important; }

html:not(.dark) #rex-container textarea::placeholder {
  color: #6c757d !important;
}

/* Light mode polish: improve hierarchy and preserve accent contrast. */
html:not(.dark) #rex-container #sidebar,
html:not(.dark) #rex-container #agent-console {
  background-color: #ffffff !important;
}

html:not(.dark) #rex-container #chat-panel {
  background-color: #f8f9fa !important;
}

html:not(.dark) #rex-container .agent-item,
html:not(.dark) #rex-container .conversation-item,
html:not(.dark) #rex-container .step-card,
html:not(.dark) #rex-container .tool-card,
html:not(.dark) #rex-container .artifact-card {
  background-color: #ffffff !important;
  border-color: #dee2e6 !important;
  box-shadow: 0 1px 2px rgba(13, 17, 23, 0.04);
}

html:not(.dark) #rex-container .agent-item:hover,
html:not(.dark) #rex-container .conversation-item:hover,
html:not(.dark) #rex-container .artifact-card:hover {
  background-color: #f8f9fa !important;
}

html:not(.dark) #rex-container .bg-dark-900.border-dark-800.rounded-2xl,
html:not(.dark) #rex-container .bg-dark-900.border-dark-800.rounded-2xl.rounded-tl-sm {
  background-color: #ffffff !important;
  border-color: #dee2e6 !important;
}

html:not(.dark) #rex-container .bg-dark-900 .text-white,
html:not(.dark) #rex-container .bg-dark-800 .text-white,
html:not(.dark) #rex-container .bg-dark-700 .text-white {
  color: #0d1117 !important;
}

html:not(.dark) #rex-container #console-tabs button.text-white {
  color: #0d1117 !important;
}

/* Keep high-contrast white text on gradient CTAs and user bubbles. */
html:not(.dark) #rex-container .bg-gradient-to-r.text-white,
html:not(.dark) #rex-container .bg-gradient-to-br.text-white,
html:not(.dark) #rex-container .bg-purple-600.text-white,
html:not(.dark) #rex-container .from-purple-600.to-blue-600.text-white {
  color: #ffffff !important;
}

html:not(.dark) #rex-container .bg-gradient-to-r .text-white,
html:not(.dark) #rex-container .bg-gradient-to-br .text-white,
html:not(.dark) #rex-container .bg-purple-600 .text-white {
  color: #ffffff !important;
}


