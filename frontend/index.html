<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HirePilot</title>
    <link rel="icon" href="/favicon.ico" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H4NC45RSZH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-H4NC45RSZH');
    </script>
  </head>
  <body>
    <div id="root"></div>
    </div>
    <!-- Live Chat Popup (replaces old FAQ popup) -->
    <div id="rex-popup" class="fixed bottom-6 right-6 z-50" style="display: none;">
      <!-- Sticky toggle pill to reopen popup -->
      <button id="rex-popup-toggle" class="px-4 py-2 rounded-full shadow-lg bg-white text-slate-800 border border-slate-200 hover:bg-slate-50 text-sm mb-3 hidden">
        üí¨ Chat with HirePilot
      </button>
      <div id="faq-panel" class="w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col">
        <div id="faq-header" class="p-6 border-b border-gray-100">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-xl font-bold text-gray-900">REX ‚Äì Helpful FAQs</h3>
            <button id="close-faq" class="p-2 hover:bg-gray-100 rounded-full transition" aria-label="Close">
              <i class="fa-solid fa-times text-gray-500"></i>
            </button>
          </div>
          <button id="chat-with-team-btn" class="w-full px-3 py-2 rounded-full bg-blue-100 text-blue-700 text-sm font-medium hover:bg-blue-200 transition flex items-center justify-center gap-2">
            <i class="fa-solid fa-headset"></i>
            Chat with Team
          </button>
          <div class="mt-3 flex items-center gap-2">
            <a href="https://app.thehirepilot.com/demo" target="_blank" rel="noopener" class="px-3 py-1.5 rounded-full bg-white text-blue-700 border border-blue-200 hover:bg-blue-50 text-xs font-medium inline-flex items-center gap-2">
              <i class="fa-solid fa-play"></i>
              View Demo
            </a>
            <a href="/pricing" class="px-3 py-1.5 rounded-full bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 text-xs font-medium inline-flex items-center gap-2">
              <i class="fa-solid fa-tag"></i>
              Pricing
            </a>
          </div>
        </div>
        <div id="faq-content" class="flex-1 p-6 overflow-y-auto">
          <div class="space-y-4">
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">What exactly does HirePilot do?</h4>
              <p class="text-sm text-gray-600">HirePilot is an AI-powered recruiting platform that automates sourcing, outreach, and scheduling so your team can fill roles faster without ballooning headcount.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">What‚Äôs included in the Pro plan?</h4>
              <p class="text-sm text-gray-600">The Pro plan includes AI sourcing via Apollo and LinkedIn, campaign management, enrichment, Chrome extension, Slack alerts, and up to 1000 credits/month. <a href="https://thehirepilot.com/pricing" class="text-blue-600 underline" target="_blank" rel="noopener">View pricing</a></p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">Do you integrate with Slack?</h4>
              <p class="text-sm text-gray-600">Yes! You can receive instant alerts in Slack when leads respond, credits are used, or campaigns go live.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">How do I launch a campaign?</h4>
              <p class="text-sm text-gray-600">Go to ‚ÄúCampaigns‚Äù ‚Üí click ‚ÄúNew Campaign‚Äù ‚Üí choose a list or lead source ‚Üí write your AI message ‚Üí launch.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">What if I don‚Äôt have an ATS?</h4>
              <p class="text-sm text-gray-600">No problem. HirePilot works as a full recruiting system ‚Äî no ATS required. But you can also integrate with your ATS if needed.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">How do I connect Apollo?</h4>
              <p class="text-sm text-gray-600">Add your Apollo API key in Settings ‚Üí Integrations. Leads will automatically flow into campaigns with enrichment data.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">Where do I see replies from leads?</h4>
              <p class="text-sm text-gray-600">Check the ‚ÄúReplies‚Äù tab or Inbox inside your campaign dashboard. You'll also get Slack/email notifications when a reply comes in.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">Do you integrate with Zapier?</h4>
              <p class="text-sm text-gray-600">Yes ‚Äî HirePilot offers full Zapier support with triggers like: lead converted, reply received, candidate hired, etc.</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition">
              <h4 class="font-semibold text-gray-900 mb-2">Can I send connection requests on LinkedIn?</h4>
              <p class="text-sm text-gray-600">Yes ‚Äî using the Chrome Extension or our automation, you can send connection requests with optional messages, powered by smart limits and proxy protection.</p>
            </div>
          </div>
        </div>
      </div>

      <div id="live-chat-panel" class="w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col hidden">
        <div id="chat-header" class="p-6 border-b border-gray-100">
          <div class="flex items-center justify-between mb-2">
            <div class="flex items-center gap-3">
              <button id="back-to-faq" class="p-2 hover:bg-gray-100 rounded-full transition" aria-label="Back">
                <i class="fa-solid fa-arrow-left text-gray-500"></i>
              </button>
              <h3 class="text-lg font-bold text-gray-900">Live Chat with HirePilot Team</h3>
            </div>
            <button id="close-chat" class="p-2 hover:bg-gray-100 rounded-full transition" aria-label="Close">
              <i class="fa-solid fa-times text-gray-500"></i>
            </button>
          </div>
          <p class="text-sm text-gray-600 ml-11">You're chatting with a real human. Ask us anything!</p>
          <div id="status-indicator" class="ml-11 mt-2 flex items-center gap-2 text-xs text-green-600">
            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
            Team is online
          </div>
        </div>

        <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-semibold">HP</div>
            <div class="flex-1">
              <div class="bg-gray-100 rounded-2xl px-4 py-3 max-w-xs">
                <p class="text-sm text-gray-900">Hi there! Welcome to HirePilot. How can we help you today?</p>
              </div>
              <span class="text-xs text-gray-500 mt-1 block">HirePilot Team ‚Ä¢ Just now</span>
            </div>
          </div>
        </div>

        <div id="message-input-section" class="p-4 border-t border-gray-100">
          <div id="user-info-form" class="mb-4 space-y-3">
            <input type="text" id="user-name" placeholder="Your name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
            <input type="email" id="user-email" placeholder="Your email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
          </div>
          <div class="flex gap-2">
            <input type="text" id="message-input" placeholder="Type your message..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
            <button id="send-message" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition flex items-center gap-2">
              <i class="fa-solid fa-paper-plane"></i>
              Send
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      (function() {
        var faqPanel = document.getElementById('faq-panel');
        var liveChatPanel = document.getElementById('live-chat-panel');
        var popupToggle = document.getElementById('rex-popup-toggle');
        var chatWithTeamBtn = document.getElementById('chat-with-team-btn');
        var backToFaqBtn = document.getElementById('back-to-faq');
        var closeFaqBtn = document.getElementById('close-faq');
        var closeChatBtn = document.getElementById('close-chat');
        var sendMessageBtn = document.getElementById('send-message');
        var messageInput = document.getElementById('message-input');
        var chatMessages = document.getElementById('chat-messages');
        var userNameInput = document.getElementById('user-name');
        var userEmailInput = document.getElementById('user-email');
        var userInfoForm = document.getElementById('user-info-form');

        var userName = '';
        var userEmail = '';
        var userInfoProvided = false;

        if (chatWithTeamBtn) chatWithTeamBtn.addEventListener('click', function(){ faqPanel.classList.add('hidden'); liveChatPanel.classList.remove('hidden'); });
        if (backToFaqBtn) backToFaqBtn.addEventListener('click', function(){ liveChatPanel.classList.add('hidden'); faqPanel.classList.remove('hidden'); });
        function hidePanelsShowToggle(){
          if (faqPanel) faqPanel.classList.add('hidden');
          if (liveChatPanel) liveChatPanel.classList.add('hidden');
          if (popupToggle) popupToggle.classList.remove('hidden');
        }
        function showFaqHideToggle(){
          if (faqPanel) faqPanel.classList.remove('hidden');
          if (liveChatPanel) liveChatPanel.classList.add('hidden');
          if (popupToggle) popupToggle.classList.add('hidden');
        }
        if (popupToggle) popupToggle.addEventListener('click', function(){ showFaqHideToggle(); });
        if (closeFaqBtn) closeFaqBtn.addEventListener('click', function(){ hidePanelsShowToggle(); });
        if (closeChatBtn) closeChatBtn.addEventListener('click', function(){ hidePanelsShowToggle(); });

        function addMessageToChat(message, sender) {
          var messageDiv = document.createElement('div');
          messageDiv.className = 'flex items-start gap-3';
          if (sender === 'user') {
            messageDiv.classList.add('flex-row-reverse');
            messageDiv.innerHTML = '\n              <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white text-sm font-semibold">' + (userName ? userName.charAt(0).toUpperCase() : 'U') + '</div>\n              <div class="flex-1">\n                <div class="bg-blue-600 text-white rounded-2xl px-4 py-3 max-w-xs ml-auto">\n                  <p class="text-sm">' + message + '</p>\n                </div>\n                <span class="text-xs text-gray-500 mt-1 block text-right">You ‚Ä¢ Now</span>\n              </div>\n            ';
          } else {
            messageDiv.innerHTML = '\n              <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-semibold">HP</div>\n              <div class="flex-1">\n                <div class="bg-gray-100 rounded-2xl px-4 py-3 max-w-xs">\n                  <p class="text-sm text-gray-900">' + message + '</p>\n                </div>\n                <span class="text-xs text-gray-500 mt-1 block">HirePilot Team ‚Ä¢ Now</span>\n              </div>\n            ';
          }
          chatMessages.appendChild(messageDiv);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
          var typingDiv = document.createElement('div');
          typingDiv.id = 'typing-indicator';
          typingDiv.className = 'flex items-center gap-2 text-sm text-gray-500 p-4';
          typingDiv.innerHTML = '\n            <div class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-semibold">HP</div>\n            <span>Team member is typing...</span>\n            <div class="flex gap-1">\n              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>\n              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>\n              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>\n            </div>\n          ';
          chatMessages.appendChild(typingDiv);
          chatMessages.scrollTop = chatMessages.scrollHeight;
          setTimeout(function(){
            typingDiv.remove();
            addMessageToChat('Thanks for reaching out! Someone from our team will get back to you soon. In the meantime, feel free to ask any other questions.', 'team');
          }, 3000);
        }

        // Generate or reuse a sessionId
        var sessionId = localStorage.getItem('chatSessionId');
        if (!sessionId && window.crypto && window.crypto.randomUUID) {
          sessionId = window.crypto.randomUUID();
          localStorage.setItem('chatSessionId', sessionId);
        } else if (!sessionId) {
          sessionId = 'sess-' + Math.random().toString(36).slice(2) + Date.now().toString(36);
          localStorage.setItem('chatSessionId', sessionId);
        }

        // Compute API base (mirror existing non-React snippet logic)
        function getApiBase(){
          try {
            var flags = (window.__REX_FLAGS__) || {};
            var apiBase = flags.apiBaseUrl || (window).VITE_BACKEND_URL || (location.origin.indexOf('thehirepilot.com') > -1 ? 'https://api.thehirepilot.com' : 'http://localhost:8080');
            return apiBase.endsWith('/api') ? apiBase : (apiBase + '/api');
          } catch (_) { return '/api'; }
        }

        function sendToSlack(name, email, message) {
          try {
            fetch(getApiBase() + '/sendToSlack', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ name: name, email: email, message: message, sessionId: sessionId })
            }).then(function(resp){ if(!resp.ok) throw new Error('Failed'); }).catch(function(){ addMessageToChat('Sorry, there was an error sending your message. Please try again.', 'team'); });
          } catch (e) {
            addMessageToChat('Sorry, there was an error sending your message. Please try again.', 'team');
          }
        }

        function sendMessage() {
          var message = (messageInput && messageInput.value ? messageInput.value.trim() : '');
          if (!message) return;
          if (!userInfoProvided) {
            userName = (userNameInput && userNameInput.value ? userNameInput.value.trim() : '');
            userEmail = (userEmailInput && userEmailInput.value ? userEmailInput.value.trim() : '');
            if (!userName || !userEmail) { alert('Please provide your name and email before sending a message.'); return; }
            userInfoProvided = true;
            if (userInfoForm) userInfoForm.classList.add('hidden');
          }
          addMessageToChat(message, 'user');
          if (messageInput) messageInput.value = '';
          sendToSlack(userName, userEmail, message);
          showTypingIndicator();
        }

        if (sendMessageBtn) sendMessageBtn.addEventListener('click', sendMessage);
        if (messageInput) messageInput.addEventListener('keypress', function(e){ if (e.key === 'Enter') sendMessage(); });

        // Poll messages every 3s to render team replies
        var lastMessagesHash = '';
        setInterval(function(){
          if (!sessionId) return;
          fetch(getApiBase() + '/getMessages?sessionId=' + encodeURIComponent(sessionId))
            .then(function(r){
              if (r.status === 304) return null; // no changes
              if (!r.ok) return null;
              return r.json();
            })
            .then(function(messages){
              if (!messages) return; // no changes or error
              if (!Array.isArray(messages)) return;
              var hash;
              try { hash = JSON.stringify(messages); } catch (_) { hash = String(Date.now()); }
              if (hash === lastMessagesHash) return;
              lastMessagesHash = hash;
              chatMessages.innerHTML = '';
              messages.forEach(function(m){ addMessageToChat(m.text, m.sender); });
              chatMessages.scrollTop = chatMessages.scrollHeight;
            })
            .catch(function(){});
        }, 3000);

        // Admin toggles (reads from window.__REX_FLAGS__ if available)
        function applyRexFlags() {
          var flags = (window.__REX_FLAGS__) || {};
          var isProductHuntMode = !!flags.isProductHuntMode;
          var isPopupEnabled = !!flags.isPopupEnabled;
          var host = document.getElementById('rex-popup');
          if (!host) return;
          if (isProductHuntMode && isPopupEnabled) {
            host.style.display = 'block';
            // On load, keep toggle hidden only if panels are visible
            if (popupToggle) {
              var anyOpen = faqPanel && !faqPanel.classList.contains('hidden');
              if (!anyOpen) popupToggle.classList.remove('hidden');
            }
            if (typeof window.hideREXChatbot === 'function') window.hideREXChatbot();
          } else {
            host.style.display = 'none';
          }
        }
        applyRexFlags();
        window.addEventListener('rex_flags_ready', applyRexFlags);
      })();
    </script>
    <script>
      (function () {
        var path = window.location.pathname;
        var publicPrefixes = [
          '/pricing',
          '/rex',
          '/copilot',
          '/handsfree',
          '/chromeextension',
          '/blog',
          '/affiliates',
          '/terms',
          '/rexsupport',
          '/apidoc'
        ];
        var isPublic = path === '/' || publicPrefixes.some(function (prefix) { return path.indexOf(prefix) === 0; });
        if (!isPublic) return;
        !function(key) { if (window.reb2b) return; window.reb2b = { loaded: true }; var s = document.createElement('script'); s.async = true; s.src = 'https://ddwl4m2hdecbv.cloudfront.net/b/' + key + '/' + key + '.js.gz'; var firstScript = document.getElementsByTagName('script')[0]; if (firstScript && firstScript.parentNode) { firstScript.parentNode.insertBefore(s, firstScript); } else { document.head.appendChild(s); } }('VN080HXJK06J');
      })();
    </script>
    <!-- Fonts and Icons for the popup -->
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap">
    <style>
      .fa, .fas, .far, .fal, .fab { font-family: "Font Awesome 6 Free", "Font Awesome 6 Brands" !important; }
      #rex-popup * { font-family: 'Inter', sans-serif; }
      #rex-popup ::-webkit-scrollbar { display: none; }
    </style>
    <script type="module" src="/src/main.jsx"></script>

  </body>
</html>
